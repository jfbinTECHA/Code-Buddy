{"version":3,"file":"capabilities-builder.js","sourceRoot":"","sources":["../../src/utils/capabilities-builder.ts"],"names":[],"mappings":";;AAQA,oDAoCC;AApCD,SAAgB,oBAAoB,CAClC,WAAmB,EACnB,QAA4B,EAC5B,OAAmB;IAGnB,MAAM,gBAAgB,GAAG,OAAO,CAAC,YAAY,IAAI,EAAE,CAAC;IAEpD,MAAM,YAAY,GAAuB,EAAE,GAAG,gBAAgB,EAAE,CAAC;IAGjE,IAAI,QAAQ,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAC9C,YAAY,CAAC,KAAK,GAAG,YAAY,CAAC,KAAK,IAAI;YACzC,WAAW,EAAE,IAAI;SAClB,CAAC;IACJ,CAAC;IAED,IAAI,QAAQ,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAClD,YAAY,CAAC,SAAS,GAAG,YAAY,CAAC,SAAS,IAAI;YACjD,WAAW,EAAE,IAAI;SAClB,CAAC;QAGF,YAAY,CAAC,iBAAiB,GAAG,YAAY,CAAC,iBAAiB,IAAI;YACjE,WAAW,EAAE,IAAI;SAClB,CAAC;IACJ,CAAC;IAGD,IAAI,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;QAChD,YAAY,CAAC,OAAO,GAAG,YAAY,CAAC,OAAO,IAAI;YAC7C,WAAW,EAAE,IAAI;SAClB,CAAC;IACJ,CAAC;IAED,OAAO,YAAY,CAAC;AACtB,CAAC","sourcesContent":["import { ServerCapabilities } from '@modelcontextprotocol/sdk/types.js';\nimport { McpRegistryService } from '../services/mcp-registry.service';\nimport { McpOptions } from '../interfaces';\n\n/**\n * Utility function to build MCP server capabilities dynamically based on\n * discovered tools, resources, and prompts\n */\nexport function buildMcpCapabilities(\n  mcpModuleId: string,\n  registry: McpRegistryService,\n  options: McpOptions,\n): ServerCapabilities {\n  // Start with user-provided capabilities or empty object\n  const baseCapabilities = options.capabilities || {};\n\n  const capabilities: ServerCapabilities = { ...baseCapabilities };\n\n  // Add tools capability if tools are discovered\n  if (registry.getTools(mcpModuleId).length > 0) {\n    capabilities.tools = capabilities.tools || {\n      listChanged: true,\n    };\n  }\n\n  if (registry.getResources(mcpModuleId).length > 0) {\n    capabilities.resources = capabilities.resources || {\n      listChanged: true,\n    };\n\n    // ToDo: Move into its own condition when we split Resources and ResourceTemplates\n    capabilities.resourceTemplates = capabilities.resourceTemplates || {\n      listChanged: true,\n    };\n  }\n\n  // Add prompts capability if prompts are discovered\n  if (registry.getPrompts(mcpModuleId).length > 0) {\n    capabilities.prompts = capabilities.prompts || {\n      listChanged: true,\n    };\n  }\n\n  return capabilities;\n}\n"]}